{"version":3,"names":[],"mappings":"","sources":["scripts.js"],"sourcesContent":["/* globals Chart, scrollama, moment */\n\nfunction ready(fn) {\n    if (document.readyState !== 'loading'){\n        fn();\n    } else {\n        document.addEventListener('DOMContentLoaded', fn);\n    }\n}\n\nready(function(){\n    const labels = ['Artichoke Basille\\'s Pizza - Times Square', 'Koronet Pizzeria', 'My PIE Pizzeria', 'Di Fara Pizza', 'Dough Boys Pizza', 'Pizza Italia', 'Marinara Pizza', 'Valentine\\'s Pizza', 'Pronto Pizza', 'Artichoke Basille\\'s Pizza - East Village'];\n\n    // Chart.defaults.color = \"#172c66\";\n    // Chart.defaults.borderColor = \"#8bd3dd\";\n    // Chart.defaults.backgroundColor = \"rgb(255, 99, 132)\";\n\n    const data = {\n        // labels: labels[0],\n        datasets: [{\n            label: 'Price of a slice vs restaurant rating',\n            backgroundColor: 'rgb(255, 99, 132)',\n            borderColor: 'rgb(255, 99, 132)',\n            data: [\n                {\n                  \"name\": \"Artichoke Basille's Pizza - Times Square\",\n                  \"x\": 6.53,\n                  \"y\": 3.5\n                },\n                {\n                  \"name\": \"Koronet Pizzeria\",\n                  \"x\": 5.5,\n                  \"y\": 3.5\n                },\n                {\n                  \"name\": \"My PIE Pizzeria\",\n                  \"x\": 5.25,\n                  \"y\": 4.5\n                },\n                {\n                  \"name\": \"Di Fara Pizza\",\n                  \"x\": 5,\n                  \"y\": 4.5\n                },\n                {\n                  \"name\": \"Dough Boys Pizza\",\n                  \"x\": 5,\n                  \"y\": 3.5\n                },\n                {\n                  \"name\": \"Pizza Italia\",\n                  \"x\": 5,\n                  \"y\": 4.5\n                },\n                {\n                  \"name\": \"Marinara Pizza\",\n                  \"x\": 4.9,\n                  \"y\": 4.5\n                },\n                {\n                  \"name\": \"Valentine's Pizza\",\n                  \"x\": 4.5,\n                  \"y\": 4\n                },\n                {\n                  \"name\": \"Pronto Pizza\",\n                  \"x\": 4.5,\n                  \"y\": 3\n                },\n                {\n                  \"name\": \"Artichoke Basille's Pizza - East Village\",\n                  \"x\": 4.5,\n                  \"y\": 4\n                }\n               ]\n        }]\n    };\n\n    // const chart = new Chart(\n    //     document.getElementById('chart'),\n    //     {\n    //         type: 'scatter',\n    //         data,\n    //         options: {\n    //             scales: {\n    //                 x: {\n    //                     ticks: {\n    //                       callback: function(value, index, values){\n    //                         return `$${ value }`;\n    //                     }\n    //                 }\n    //             }\n    //         },\n    //         plugins: {\n    //             tooltip: {\n    //                 callbacks: {\n    //                     label: function(context){\n    //                         const name = context.raw.name;\n    //                         const price = context.raw.x;\n    //                         const rating = context.raw.y;\n    //                         return `${name}: $${price} / ${rating}â˜…`;\n    //                   }\n    //               }\n    //           }\n    //       }\n    //   }\n    // });\n\n\n    [...document.getElementsByClassName('step-next')].forEach(btn => {\n        btn.addEventListener('click', ev => {\n            ev.preventDefault();\n            const stepID = ev.target.getAttribute('href');\n            document.getElementById(stepID.replace('#', '')).scrollIntoView({ behavior: \"smooth\", block: \"end\", inline: \"nearest\" });\n        })\n    })\n\n    const menuIcon = document.getElementById('menu-icon');\n    const scroller = scrollama();\n\n    const locations = [];\n    \n    [...document.getElementsByClassName('step')].forEach(step => {\n        const lng = parseFloat(step.dataset.lng);\n        const lat = parseFloat(step.dataset.lat);\n\n        const marker = new mapboxgl.Marker({ \"color\": \"#232946\" })\n                                   .setLngLat([lng, lat]);\n        locations.push([lng, lat]);\n    });\n\n    mapboxgl.accessToken = 'pk.eyJ1IjoiZm91cnRvbmZpc2giLCJhIjoiY2xlZzlkbHJlMDRuZTNzcDZyMzdwNmZyZiJ9.7IMx3xgFUmr_MSU3QeEU8g';\n    const map = new mapboxgl.Map({\n        container: 'map',\n        style: 'mapbox://styles/mapbox/light-v11',\n        center: [-74.5, 40],\n        zoom: 13\n    });\n\n    const firstStep = document.getElementById('step-0');\n\n    const lng = parseFloat(firstStep.dataset.lng);\n    const lat = parseFloat(firstStep.dataset.lat);\n\n    const options = {\n        center: [lng, lat],\n        essential: false\n    };\n\n    map.flyTo(options);\n\n\n    let markers = [];\n\n    scroller\n        .setup({\n            step: '.step',\n        })\n        .onStepEnter(function(response){\n            /* response = { direction, element, index }, */\n            // console.log('onStepEnter', response); \n            // console.log('onStepEnter', response.index, response.direction);\n\n            [...document.getElementsByClassName('active-step')].forEach(el => el.classList.remove('active-step'));\n            response.element.classList.add('active-step');\n\n            const lng = parseFloat(response.element.dataset.lng);\n            const lat = parseFloat(response.element.dataset.lat);\n\n            const options = {\n                center: [lng, lat],\n                essential: false\n            };\n\n            map.flyTo(options);\n            \n            markers = window.helpers.mapboxHelper.addMarkers(map, locations, markers, '#232946', '#b8c1ec', response.index);\n\n            if (menuIcon && ((response.direction === 'down' && response.index >= 0) || (response.direction === 'up' && response.index <= datasets.length - 1))){\n                menuIcon.classList.add('d-none');\n                menuIcon.classList.add('d-md-block');\n            }\n        })\n        .onStepExit(function(response){\n            /* response = { direction, element, index }, */\n            // console.log('onStepExit', response);\n            // console.log('onStepExit', response.index, response.direction);\n\n            if (menuIcon && ((response.direction === 'up' && response.index === 0) || (response.direction === 'down' && response.index === datasets.length - 1))){\n                menuIcon.classList.remove('d-none');\n            }\n        }\n   );\n\n    window.addEventListener('resize', scroller.resize);\n});\n"],"file":"scripts.min.js"}
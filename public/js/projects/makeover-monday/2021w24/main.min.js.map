{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["/* globals d3 */\nimport ready from '/js/modules/ready.min.js';\n\nready(async () => {\n    const resp = await fetch('/data/student-loans/student-loans-us-2020-2021.json');\n    const data = await resp.json();\n\n    const options = {\n        rectWidth: 45,\n        rectHeight: 45\n    };\n\n    const colors = [\n        \"#b2ddf0\",\n        \"#92bcd8\",\n        \"#769cbf\",\n        \"#5d7da7\",\n        \"#46608f\",\n        \"#334577\",\n        \"#232d5f\"\n    ];\n\n    const color = d3.scale\n        .quantize()\n        .domain([10, 30])\n        .range(colors);\n\n    const svg = d3\n        .select(\"svg\")\n        .attr(\"viewBox\", `0 0 ${ 12 * options.rectWidth } ${ 8 * options.rectHeight }`);\n\n    const sEnter = svg\n        .append(\"g\")\n        .selectAll(\"g\")\n        .data(data)\n        .enter()\n        .append(\"g\")\n        .attr(\"preserveAspectRatio\", \"xMinYMin\")\n        .attr(\"transform\", function(d) {\n            return (\n                \"translate(\" +\n                d.x * options.rectWidth +\n                \",\" +\n                d.y * options.rectHeight +\n                \")\"\n           );\n        });\n\n    sEnter\n        .append(\"rect\")\n        .attr(\"width\", options.rectWidth)\n        .attr(\"height\", options.rectHeight)\n        .attr(\"vector-effect\", \"non-scaling-stroke\")\n        .style(\"opacity\", 0.5)\n        .style(\"stroke\", \"#aaa\")\n        .style(\"fill\", function(d) {\n            return color(d.loan_payoff_months);\n        });\n\n    sEnter\n        .append(\"text\")\n        .attr(\"x\", options.rectWidth / 2)\n        .attr(\"y\", options.rectHeight / 2 + 2)\n        .style(\"text-anchor\", \"middle\")\n        .text(function(d) {\n            return d.state_abbrev;\n        });\n\n    const $table = $('table');\n    $table.find('#data-table-body').html(data.map(d => `\n    <tr>\n        <td>${d.state_name}</td>\n        <td align=\"right\">${d.loan_per_recipient}</td>\n        <td align=\"right\">${d.annual_salary}</td>\n        <td align=\"right\">${d.loan_payoff_months}</td>\n    </tr>\n    `));\n\n    $table.DataTable({\n      \"columns\": [\n      { \"data\": \"state\" },\n      { \"data\": \"loanPerRecipient\",\n      render: $.fn.dataTable.render.number(',', '.', 2, '$') \n  },\n  { \"data\": \"annualSalary \",\n  render: $.fn.dataTable.render.number(',', '.', 2, '$') \n},\n{ \"data\": \"monthsToPayOff\" },\n]\n\n});\n\n\n});\n"],"file":"main.min.js"}
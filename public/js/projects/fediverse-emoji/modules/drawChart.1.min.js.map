{"version":3,"names":[],"mappings":"","sources":["modules/drawChart.1.js"],"sourcesContent":["export const drawChart = (userData) => {\r\n  // Chart.defaults.font.family = \"Noto Color Emoji\";\r\n  let highlightedValues = [];\r\n  // const labels = userData.allDomains.map((domain) => domain.domain);\r\n  // const datasets = [userData.allDomains.map((domain) => domain.connections)];\r\n  // Chart.defaults.color = \"#172c66\";\r\n  // Chart.defaults.borderColor = \"#8bd3dd\";\r\n  // Chart.defaults.backgroundColor = \"rgb(255, 99, 132)\";\r\n  // const emojis = userData.emoji.slice(0, 10);\r\n  const emojis = userData.emoji;\r\n  const minFontSize = 25;\r\n  const maxFontSize = 50;\r\n  // const minFontSize = Math.min(200/emojis.length, 10);\r\n  // const maxFontSize = Math.min(300/emojis.length, 40);\r\n  // console.log({minFontSize, maxFontSize});\r\n  const maxCount = Math.max(...emojis.map(emoji => emoji.count));\r\n  const minCount = Math.min(...emojis.map(emoji => emoji.count));\r\n\r\n  const scale = (num, in_min, in_max, out_min, out_max) => (num - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\r\n\r\n  const data = {\r\n    // labels: emojis.map(emoji => `#${emoji.emoji}`),\r\n    labels: emojis.map(emoji => emoji.emoji),\r\n    datasets: [\r\n      {\r\n        label: `Your top ${emojis.length.toLocaleString()} emoji`,\r\n        // data: emojis.map((emoji) => emoji.count)\r\n        data: emojis.map((emoji) => scale(emoji.count, minCount, maxCount, minFontSize, maxFontSize))\r\n        // data: emojis.map((d, i) => {\r\n        //   let size = 5 + d.count * 5;\r\n        //   if (size > 45){\r\n        //     size = 45;\r\n        //   }\r\n        //   if (i > emojis.length - 5){\r\n        //     size = 50 + (emojis.length - i);\r\n        //   }\r\n        //   return size;\r\n        // })\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    // fit: true,\r\n    // responsive: true,\r\n    rotationSteps: 0,\r\n    minRotation: 0,\r\n    padding: 4,\r\n    // style:{\r\n    //   font: {\r\n    //     family: \"Noto Color Emoji\"\r\n    //   }  \r\n    // },\r\n    plugins: {\r\n      // font: {\r\n      //   family: \"Noto Color Emoji\"\r\n      // },        \r\n      customCanvasBackgroundColor: \"#fff\",\r\n      tooltip: {\r\n        callbacks: {\r\n          title: (tooltipItems) => emojis[tooltipItems[0].dataIndex].emoji,\r\n          label: (context) => `used ${emojis[context.dataIndex].count} time(s)`\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  options.style.font.family = \"Noto Color Emoji\";\r\n\r\n  const chart = new Chart(document.getElementById(\"chart\"), {\r\n    type: \"wordCloud\",\r\n    data: data,\r\n    options,\r\n    plugins: [{\r\n      id: 'customCanvasBackgroundColor',\r\n      beforeDraw: (chart, args, options) => {\r\n        const { ctx } = chart;\r\n        ctx.save();\r\n        ctx.globalCompositeOperation = 'destination-over';\r\n        ctx.fillStyle = options.color || '#fff';\r\n        ctx.fillRect(0, 0, chart.width, chart.height);\r\n        ctx.restore();\r\n      }\r\n    }],\r\n  });\r\n\r\n};\r\n"],"file":"drawChart.1.min.js"}
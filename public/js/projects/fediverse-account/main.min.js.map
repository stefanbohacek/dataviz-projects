{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["/* globals Chart, scrollama, moment */\nimport ready from \"/js/modules/ready.min.js\";\nimport highlightMax from \"/js/modules/highlightMax.min.js\";\nimport getMonth from \"/js/modules/getMonth.min.js\";\n\nready(() => {\n  const archiveInput = document.getElementById(\"archive\");\n\n\n  const decompressBlob = async (blob) => {\n    let ds = new DecompressionStream(\"gzip\");\n    let decompressedStream = blob.stream().pipeThrough(ds);\n    return await new Response(decompressedStream).blob();\n  }\n\n    const readFile = async (event) => {\n        console.log(event.target.result);\n        const decompressed = await decompressBlob(event.target.result);\n\n        untar(decompressed).then((extractedFiles) => {\n            console.log({ extractedFiles });\n        });\n      \n    }\n  \n  \n\n\n\n\n\n\n\n  archiveInput.addEventListener('change', async (event) => {\n    const file = event.target.files[0];\n    const buffer = await file.arrayBuffer();\n    const byteArray = new Int8Array(buffer);\n      \n    console.log({file});\n    console.log({buffer})\n    console.log({byteArray});\n\n    const reader = new FileReader();\n    reader.addEventListener('load', readFile);\n    reader.readAsText(file);\n     \n\n\n\n\n\n\n\n\n\n});\n\n  // const labels = [\n  //   'January',\n  //   'February',\n  //   'March',\n  //   'April',\n  //   'May',\n  //   'June',\n  //   'July',\n  //   'August',\n  //   'September',\n  //   'October',\n  //   'November',\n  //   'December'\n  // ];\n\n  const labels = [\n    [\n      \"2013/01\",\n      \"2013/02\",\n      \"2013/03\",\n      \"2013/04\",\n      \"2013/05\",\n      \"2013/06\",\n      \"2013/07\",\n      \"2013/08\",\n      \"2013/09\",\n      \"2013/10\",\n      \"2013/11\",\n      \"2013/12\",\n    ],\n    [\n      \"2014/01\",\n      \"2014/02\",\n      \"2014/03\",\n      \"2014/04\",\n      \"2014/05\",\n      \"2014/06\",\n      \"2014/07\",\n      \"2014/08\",\n      \"2014/09\",\n      \"2014/10\",\n      \"2014/11\",\n      \"2014/12\",\n    ],\n    [\n      \"2015/01\",\n      \"2015/02\",\n      \"2015/03\",\n      \"2015/04\",\n      \"2015/05\",\n      \"2015/06\",\n      \"2015/07\",\n      \"2015/08\",\n      \"2015/09\",\n      \"2015/10\",\n      \"2015/11\",\n      \"2015/12\",\n    ],\n    [\n      \"2016/01\",\n      \"2016/02\",\n      \"2016/03\",\n      \"2016/04\",\n      \"2016/05\",\n      \"2016/06\",\n      \"2016/07\",\n      \"2016/08\",\n      \"2016/09\",\n      \"2016/10\",\n      \"2016/11\",\n      \"2016/12\",\n    ],\n    [\n      \"2017/01\",\n      \"2017/02\",\n      \"2017/03\",\n      \"2017/04\",\n      \"2017/05\",\n      \"2017/06\",\n      \"2017/07\",\n      \"2017/08\",\n      \"2017/09\",\n      \"2017/10\",\n      \"2017/11\",\n      \"2017/12\",\n    ],\n    [\n      \"2018/01\",\n      \"2018/02\",\n      \"2018/03\",\n      \"2018/04\",\n      \"2018/05\",\n      \"2018/06\",\n      \"2018/07\",\n      \"2018/08\",\n      \"2018/09\",\n      \"2018/10\",\n      \"2018/11\",\n      \"2018/12\",\n    ],\n    [\n      \"2019/01\",\n      \"2019/02\",\n      \"2019/03\",\n      \"2019/04\",\n      \"2019/05\",\n      \"2019/06\",\n      \"2019/07\",\n      \"2019/08\",\n      \"2019/09\",\n      \"2019/10\",\n      \"2019/11\",\n      \"2019/12\",\n    ],\n    [\n      \"2020/01\",\n      \"2020/02\",\n      \"2020/03\",\n      \"2020/04\",\n      \"2020/05\",\n      \"2020/06\",\n      \"2020/07\",\n      \"2020/08\",\n      \"2020/09\",\n      \"2020/10\",\n      \"2020/11\",\n      \"2020/12\",\n    ],\n    [\n      \"2021/01\",\n      \"2021/02\",\n      \"2021/03\",\n      \"2021/04\",\n      \"2021/05\",\n      \"2021/06\",\n      \"2021/07\",\n      \"2021/08\",\n      \"2021/09\",\n      \"2021/10\",\n      \"2021/11\",\n      \"2021/12\",\n    ],\n  ];\n\n  const datasets = [\n    [0, 10, 5, 2, 20, 30, 45, 35, 32, 25, 30, 15],\n    [5, 8, 20, 15, 25, 35, 20, 30, 25, 15, 25, 5],\n    [2, 14, 18, 5, 18, 40, 50, 45, 40, 25, 15, 10],\n    [5, 15, 12, 20, 35, 30, 40, 42, 35, 30, 20, 8],\n    [10, 20, 15, 20, 25, 35, 40, 40, 38, 45, 40, 27],\n    [15, 20, 35, 40, 35, 42, 60, 50, 42, 50, 35, 25],\n    [5, 15, 10, 25, 20, 30, 40, 55, 45, 25, 32, 28],\n    [12, 24, 38, 25, 38, 45, 50, 60, 55, 50, 48, 25],\n    [10, 20, 45, 35, 30, 40, 45, 35, 45, 50, 55, 52],\n  ];\n\n  const descriptionLabels = [\n    \"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\",\n    \"Dolor magna eget est lorem ipsum dolor sit amet.\",\n    \"Sed viverra tellus in hac habitasse platea dictumst vestibulum rhoncus.\",\n    \"Tortor condimentum lacinia quis vel eros.\",\n    \"Neque vitae tempus quam pellentesque nec nam.\",\n    \"Mus mauris vitae ultricies leo integer.\",\n    \"Adipiscing commodo elit at imperdiet dui accumsan sit amet.\",\n    \"Arcu cursus vitae congue mauris rhoncus.\",\n    \"Tempor orci eu lobortis elementum.\",\n  ];\n\n  // Chart.defaults.color = \"#172c66\";\n  // Chart.defaults.borderColor = \"#8bd3dd\";\n  // Chart.defaults.backgroundColor = \"rgb(255, 99, 132)\";\n\n  const data = {\n    labels: labels[0],\n    datasets: [\n      {\n        label: \"Data\",\n        backgroundColor: \"rgb(255, 99, 132)\",\n        borderColor: \"rgb(255, 99, 132)\",\n        data: datasets[0],\n      },\n    ],\n  };\n\n  const chart = new Chart(document.getElementById(\"chart\"), {\n    type: \"line\",\n    data,\n    options: {\n      scales: {\n        y: {\n          suggestedMin: 0,\n          suggestedMax: Math.max(...[].concat(...datasets)),\n          ticks: {\n            callback: (value, index, values) => {\n              return `$${value}`;\n            },\n          },\n        },\n      },\n      plugins: {\n        tooltip: {\n          callbacks: {\n            title: (tooltipItems) => {\n              const title = tooltipItems[0].label;\n              const year = title.split(\"/\")[0];\n              const month = getMonth(parseInt(title.split(\"/\")[1]) - 1);\n              return `${month} ${year}`;\n            },\n            label: (context) => {\n              let label = context.dataset.label || \"\";\n              if (label) {\n                label += \": \";\n              }\n              if (context.parsed.y !== null) {\n                label += new Intl.NumberFormat(\"en-US\", {\n                  style: \"currency\",\n                  currency: \"USD\",\n                }).format(context.parsed.y);\n              }\n              return label;\n            },\n          },\n        },\n      },\n    },\n  });\n\n  const description = document.getElementById(\"description\");\n  const menuIcon = document.getElementById(\"menu-icon\");\n  const scroller = scrollama();\n\n  scroller\n    .setup({\n      step: \".step\",\n    })\n    .onStepEnter((response) => {\n      /* response = { direction, element, index }, */\n      // console.log('onStepEnter', response);\n      // console.log('onStepEnter', response.index, response.direction);\n\n      if (\n        menuIcon &&\n        ((response.direction === \"down\" && response.index >= 0) ||\n          (response.direction === \"up\" &&\n            response.index <= datasets.length - 1))\n      ) {\n        menuIcon.classList.add(\"d-none\");\n        menuIcon.classList.add(\"d-md-block\");\n      }\n\n      chart.data.datasets[0].data = datasets[response.index];\n      chart.data.labels = labels[response.index];\n      chart.data.datasets[0].pointBackgroundColor = [];\n\n      chart.data.datasets[0].data.forEach((d, i) => {\n        if (chart.data.datasets[0].data[i] >= 30) {\n          chart.data.datasets[0].pointBackgroundColor[i] = \"rgb(0,0,0)\";\n        } else {\n          chart.data.datasets[0].pointBackgroundColor[i] = \"rgb(255 99 132)\";\n        }\n      });\n\n      chart.update();\n      description.innerHTML = descriptionLabels[response.index];\n\n      highlightMax(chart);\n    })\n    .onStepExit((response) => {\n      /* response = { direction, element, index }, */\n      // console.log('onStepExit', response);\n      // console.log('onStepExit', response.index, response.direction);\n\n      if (\n        menuIcon &&\n        ((response.direction === \"up\" && response.index === 0) ||\n          (response.direction === \"down\" &&\n            response.index === datasets.length - 1))\n      ) {\n        menuIcon.classList.remove(\"d-none\");\n      }\n    });\n\n  window.addEventListener(\"resize\", scroller.resize);\n});\n"],"file":"main.min.js"}